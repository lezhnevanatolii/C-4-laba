#include <iostream>
#include <cmath>

class QuadraticEquation {
private:
    double a, b, c;

public:
    QuadraticEquation(double a_ = 1, double b_ = 0, double c_ = 0) : a(a_), b(b_), c(c_) {}

    void setCoefficients(double a_, double b_, double c_) {
        a = a_; b = b_; c = c_;
    }

    friend std::ostream& operator<<(std::ostream& os, const QuadraticEquation& eq) {
        os << "Формула: " << eq.a << "x^2 ";
        if (eq.b >= 0) os << "+ " << eq.b << "x ";
        else os << "- " << -eq.b << "x ";
        if (eq.c >= 0) os << "+ " << eq.c;
        else os << "- " << -eq.c;
        return os;
    }

    QuadraticEquation& operator++() {
        ++a; ++b; ++c;
        return *this;
    }
    QuadraticEquation operator++(int) {
        QuadraticEquation temp = *this;
        ++a; ++b; ++c;
        return temp;
    }

    QuadraticEquation& operator--() {
        --a; --b; --c;
        return *this;
    }
    QuadraticEquation operator--(int) {
        QuadraticEquation temp = *this;
        --a; --b; --c;
        return temp;
    }

    operator double() const {
        return b * b - 4 * a * c;
    }

    explicit operator bool() const {
        return (*this) >= 0;
    }

    friend bool operator==(const QuadraticEquation& lhs, const QuadraticEquation& rhs) {
        return lhs.a == rhs.a && lhs.b == rhs.b && lhs.c == rhs.c;
    }
    friend bool operator!=(const QuadraticEquation& lhs, const QuadraticEquation& rhs) {
        return !(lhs == rhs);
    }

    void getRoots() const {
        double D = double(*this);
        std::cout << "Дискриминант D = " << D << "\n";

        if (D < 0) {
            std::cout << "Корней нет.\n";
            return;
        }
        double sqrtD = std::sqrt(D);
        double x1 = (-b + sqrtD) / (2 * a);
        double x2 = (-b - sqrtD) / (2 * a);
        if (D == 0) {
            std::cout << "Один корень: x = " << x1 << "\n";
        } else {
            std::cout << "Два корня: x1 = " << x1 << ", x2 = " << x2 << "\n";
        }
    }

    double getA() const { return a; }
    double getB() const { return b; }
    double getC() const { return c; }
};

int main() {
    setlocale(LC_ALL, "");

    std::cout << "Программа для работы с квадратичными уравнениями.\n";

    double a, b, c;

    std::cout << "Введите коэффициент a: ";
    std::cin >> a;
    std::cout << "Введите коэффициент b: ";
    std::cin >> b;
    std::cout << "Введите коэффициент c: ";
    std::cin >> c;

    QuadraticEquation eq(a, b, c);
    std::cout << "Созданное уравнение: " << eq << "\n";


    std::cout << "\nПрефикс ++: \n";
    ++eq;
    std::cout << "После ++: " << eq << "\n";

    std::cout << "\nПостфикс ++: \n";
    eq++;
    std::cout << "После ++: " << eq << "\n";

    std::cout << "\nПрефикс --: \n";
    --eq;
    std::cout << "После --: " << eq << "\n";

    std::cout << "\nПостфикс --: \n";
    eq--;
    std::cout << "После --: " << eq << "\n";

    double D = (double)eq;
    std::cout << "\nДискриминант уравнения равен: " << D << "\n";

    std::cout << "Есть ли действительные корни? ";
    if (static_cast<bool>(eq))
        std::cout << "Да\n";
    else
        std::cout << "Нет\n";

    eq.getRoots();

    QuadraticEquation eq2(1, -3, 2);
    std::cout << "\nСоздано уравнение: " << eq2 << "\n";
    std::cout << "eq == eq2 ? " << (eq == eq2 ? "Да" : "Нет") << "\n";

    eq2.setCoefficients(2, -6, 4);
    std::cout << "\nОбновленное eq2: " << eq2 << "\n";
    std::cout << "eq == eq2 ? " << (eq == eq2 ? "Да" : "Нет") << "\n";
    std::cout << "eq != eq2 ? " << (eq != eq2 ? "Да" : "Нет") << "\n";

    return 0;
}
